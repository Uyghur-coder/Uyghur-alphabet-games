<!doctype html>
<html lang="en" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Uyghur Alphabet Click & Match</title>

<script src="https://cdn.tailwindcss.com"></script>
<style>
body { font-family: Arial, sans-serif; }
.letter-glyph { font-size: 2rem; text-align: center; }
.slot { border: 2px dashed #ccc; border-radius: 0.5rem; width: 3rem; height: 3rem; display: flex; justify-content: center; align-items: center; cursor: pointer; margin: 0.2rem; }
.tiles-container { display: flex; flex-wrap: wrap; gap: 0.3rem; margin-top: 1rem; }
.tile { border: 2px solid #ccc; border-radius: 0.5rem; padding: 0.3rem; cursor: pointer; display: flex; flex-direction: column; align-items: center; justify-content: center; width: 3rem; height: 3rem; }
.tile.selected { border-color: #3b82f6; background-color: #dbebff; }
.letter-column { display: flex; flex-direction: column; align-items: center; margin: 0.2rem; }
.form-slot.initial { background-color: #bfdbfe; }
.form-slot.medial { background-color: #bbf7d0; }
.form-slot.final { background-color: #fef9c3; }
.prompt-row { display: flex; flex-wrap: wrap; justify-content: center; margin-bottom: 1rem; }
</style>
</head>
<body class="p-4">

<div id="root" class="max-w-6xl mx-auto"></div>

<script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<script type="text/babel">
const { useState, useEffect } = React;

// Alphabet data from your table
const LETTERS = [
  {id:"a",isolated:"ا",initial:"ئا",medial:"ـئا",final:"ـا"},
  {id:"e",isolated:"ە",initial:"ئە",medial:"ـئە",final:"ـە"},
  {id:"b",isolated:"ب",initial:"بـ",medial:"ـبـ",final:"ـب"},
  {id:"p",isolated:"پ",initial:"پـ",medial:"ـپـ",final:"ـپ"},
  {id:"t",isolated:"ت",initial:"تـ",medial:"ـتـ",final:"ـت"},
  {id:"j",isolated:"ج",initial:"جـ",medial:"ـجـ",final:"ـج"},
  {id:"ch",isolated:"چ",initial:"چـ",medial:"ـچـ",final:"ـچ"},
  {id:"kh",isolated:"خ",initial:"خـ",medial:"ـخـ",final:"ـخ"},
  {id:"d",isolated:"د",initial:"د",medial:null,final:"ـد"},
  {id:"r",isolated:"ر",initial:"ر",medial:null,final:"ـر"},
  {id:"z",isolated:"ز",initial:"ز",medial:null,final:"ـز"},
  {id:"zh",isolated:"ژ",initial:"ژ",medial:null,final:"ـژ"},
  {id:"s",isolated:"س",initial:"سـ",medial:"ـسـ",final:"ـس"},
  {id:"sh",isolated:"ش",initial:"شـ",medial:"ـشـ",final:"ـش"},
  {id:"gh",isolated:"غ",initial:"غـ",medial:"ـغـ",final:"ـغ"},
  {id:"f",isolated:"ف",initial:"فـ",medial:"ـفـ",final:"ـف"},
  {id:"q",isolated:"ق",initial:"قـ",medial:"ـقـ",final:"ـق"},
  {id:"k",isolated:"ك",initial:"كـ",medial:"ـكـ",final:"ـك"},
  {id:"g",isolated:"گ",initial:"گـ",medial:"ـگـ",final:"ـگ"},
  {id:"ng",isolated:"ڭ",initial:"ڭـ",medial:"ـڭـ",final:"ـڭ"},
  {id:"l",isolated:"ل",initial:"لـ",medial:"ـلـ",final:"ـل"},
  {id:"m",isolated:"م",initial:"مـ",medial:"ـمـ",final:"ـم"},
  {id:"n",isolated:"ن",initial:"نـ",medial:"ـنـ",final:"ـن"},
  {id:"h",isolated:"ھ",initial:"ھـ",medial:"ـھـ",final:"ـھ"},
  {id:"o",isolated:"و",initial:"ئو",medial:"ـئو",final:"ـو"},
  {id:"u",isolated:"ۇ",initial:"ئۇ",medial:"ـئۇ",final:"ـۇ"},
  {id:"ö",isolated:"ۆ",initial:"ئۆ",medial:"ـئۆ",final:"ـۆ"},
  {id:"ü",isolated:"ۈ",initial:"ئۈ",medial:"ـئۈ",final:"ـۈ"},
  {id:"w",isolated:"ۋ",initial:"ۋ",medial:null,final:"ـۋ"},
  {id:"y",isolated:"ي",initial:"يـ",medial:"ـيـ",final:"ـي"},
  {id:"e2",isolated:"ئې",initial:"ئېـ، ېـ",medial:"ـئېـ، ـېـ",final:"ـې"},
  {id:"i",isolated:"ئى، ى",initial:"ئىـ، ىـ",medial:"ـئىـ، ـىـ",final:"ـى"}
];

const FORM_TYPES = ["initial","medial","final"];

function UyghurAlphabetGame() {
  const [lettersPerRound,setLettersPerRound]=useState(4);
  const [selectedLetters,setSelectedLetters]=useState([]);
  const [tiles,setTiles]=useState([]);
  const [placements,setPlacements]=useState({});
  const [selectedTile,setSelectedTile]=useState(null);

  useEffect(()=>{ startNewRound(); },[lettersPerRound]);

  function startNewRound() {
    const shuffled = LETTERS.sort(()=>0.5 - Math.random());
    const selected = shuffled.slice(0,lettersPerRound);
    setSelectedLetters(selected);
    const newTiles = selected.flatMap(letter=>FORM_TYPES.map(form=>({id:letter.id+"-"+form,letterId:letter.id,form,glyph:letter[form]}))).sort(()=>0.5 - Math.random());
    setTiles(newTiles);
    setPlacements({});
    setSelectedTile(null);
  }

  function handleTileClick(tile){ setSelectedTile(tile); }

  function handleSlotClick(letterId,form){
    if(!selectedTile) return;
    if(selectedTile.letterId===letterId && selectedTile.form===form){
      setPlacements({...placements,[letterId+"-"+form]:selectedTile.id});
    }
    setSelectedTile(null);
  }

  return (
    <div>
      <div className="flex gap-4 items-center mb-4 flex-wrap">
        <label>Letters per round:
          <select className="ml-2 p-1 border rounded" value={lettersPerRound} onChange={e=>setLettersPerRound(Number(e.target.value))}>
            {[2,4,6,8,10].map(n=> <option key={n} value={n}>{n}</option>)}
          </select>
        </label>
        <button className="px-3 py-1 bg-blue-500 text-white rounded" onClick={startNewRound}>New Round</button>
      </div>

      <div className="prompt-row">
        {selectedLetters.map(letter=>(
          <div key={letter.id} className="letter-column">
            <div className="letter-glyph">{letter.isolated}</div>
            {FORM_TYPES.map(form=>{
              const placed=placements[letter.id+"-"+form];
              return (
                <div key={form} className={`form-slot slot ${form}`} onClick={()=>handleSlotClick(letter.id,form)}>
                  {placed && <span className="letter-glyph">{letter[form]}</span>}
                </div>
              );
            })}
          </div>
        ))}
      </div>

      <div className="tiles-container">
        {tiles.map(tile=>{
          const placed=Object.values(placements).includes(tile.id);
          return !placed && (
            <div key={tile.id} className={`tile ${selectedTile?.id===tile.id?'selected':''}`} onClick={()=>handleTileClick(tile)}>
              <div className="letter-glyph">{tile.glyph}</div>
            </div>
          );
        })}
      </div>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<UyghurAlphabetGame />);
</script>
</body>
</html>
