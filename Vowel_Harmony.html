<!DOCTYPE html>
<html lang="ug" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Uyghur Vowel Harmony Game</title>
<style>
@font-face {
  font-family: 'ALKATIPYazma';
  src: url('https://raw.githubusercontent.com/Uyghur-coder/Uyghur-alphabet-games/main/fonts/ALKATIPYazma.ttf') format('truetype');
}

body { font-family: 'ALKATIPYazma', sans-serif; text-align: center; margin: 30px; background-color:#f0f8ff; }

h1, h2 { margin-bottom: 15px; font-weight: normal; }

/* Draggable vowels */
.vowel {
  display: inline-block;
  margin: 8px;
  padding: 12px 20px;
  border-radius: 8px;
  cursor: grab;
  font-size: 24px;
  color: #222;
  background-color: #FFFACD;
  box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
  transition: 0.2s;
}
.vowel:hover { transform: scale(1.1); background-color: #FFE680; }

/* Drop labels */
.drop-label {
  font-size: 18px;
  font-weight: bold;
  margin-bottom: 5px;
}

/* Drop zones */
.dropzone {
  display: inline-block;
  margin: 0 10px 20px 10px;
  padding: 5px;
  border: 2px dashed #888;
  border-radius: 8px;
  width: 150px;
  height: 80px;
  vertical-align: top;
  font-size: 20px;
  color: #555;
  background-color: #F8F8F8;
  transition: 0.2s;
}
.dropzone.complete {
  box-shadow: 0 0 15px 3px #6FCF97;
  border-color: green;
}
.dropzone span.vowels {
  display: block;
  margin-top: 5px;
  font-size: 18px;
  max-height: 60px;
  overflow-y: auto;
  word-wrap: break-word;
  padding-right: 3px;
}

#feedback { font-weight:bold; margin-top: 20px; font-size: 20px; min-height:24px; }
button { font-size: 16px; margin: 8px; padding: 6px 12px; cursor:pointer; }
</style>
</head>
<body>

<h1>Uyghur Vowel Harmony Game 🎵</h1>
<p>Drag each vowel to the correct category</p>

<div id="vowels"></div>

<div>
  <div style="display:inline-block; text-align:center;">
    <div class="drop-label">Front</div>
    <div id="frontZone" class="dropzone" ondrop="drop(event,'front')" ondragover="allowDrop(event)"></div>
  </div>
  <div style="display:inline-block; text-align:center;">
    <div class="drop-label">Back</div>
    <div id="backZone" class="dropzone" ondrop="drop(event,'back')" ondragover="allowDrop(event)"></div>
  </div>
  <div style="display:inline-block; text-align:center;">
    <div class="drop-label">Neutral</div>
    <div id="neutralZone" class="dropzone" ondrop="drop(event,'neutral')" ondragover="allowDrop(event)"></div>
  </div>
</div>

<p id="feedback"></p>
<p>Score: <span id="score">0</span></p>
<button onclick="startGame()">New Round</button>
<button onclick="clearRound()">Clear Round</button>

<script>
const vowels = [
  {letter:'ә / ئە', type:'front'},
  {letter:'i / ئى', type:'neutral'},
  {letter:'é / ئې', type:'neutral'},
  {letter:'ö / ئۆ', type:'front'},
  {letter:'ü / ئۈ', type:'front'},
  {letter:'a / ئا', type:'back'},
  {letter:'o / ئو', type:'back'},
  {letter:'u / ئۇ', type:'back'},
];

let score = 0;

function shuffleArray(array){
  for(let i = array.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function allowDrop(ev){ ev.preventDefault(); }
function drag(ev){ ev.dataTransfer.setData("text", ev.target.id); }

function drop(ev, category){
  ev.preventDefault();
  const data = ev.dataTransfer.getData("text");
  const dragged = document.getElementById(data);
  if(!dragged) return;

  const zone = document.getElementById(category + 'Zone');

  if(dragged.dataset.type === category){
    let vowelsSpan = zone.querySelector('span.vowels');
    if(!vowelsSpan){
      vowelsSpan = document.createElement('span');
      vowelsSpan.className = 'vowels';
      zone.appendChild(vowelsSpan);
    }

    if(zone.dataset.vowels){
      zone.dataset.vowels += ', ' + dragged.innerText;
    } else {
      zone.dataset.vowels = dragged.innerText;
    }
    vowelsSpan.innerText = zone.dataset.vowels;

    dragged.remove();

    document.getElementById('feedback').innerText = "✅ Correct!";
    score++;
  } else {
    dragged.style.transition = "transform 0.3s";
    dragged.style.transform = "translateX(15px)";
    setTimeout(()=>{ dragged.style.transform = "translateX(-15px)"; },150);
    setTimeout(()=>{ dragged.style.transform = "translateX(0)"; },300);
    document.getElementById('feedback').innerText = "❌ Wrong! Try again.";
  }

  document.getElementById('score').innerText = score;

  const vowelsOfType = vowels.filter(v => v.type === category).length;
  const placedInZone = zone.dataset.vowels ? zone.dataset.vowels.split(',').length : 0;
  if(placedInZone === vowelsOfType){
    zone.classList.add('complete');
  }

  if(score === vowels.length){
    document.getElementById('feedback').innerText = "🎉 Congratulations! All vowels placed correctly! 🎉";
  }
}

function createVowels(){
  const container = document.getElementById('vowels');
  container.innerHTML = '';
  const shuffled = shuffleArray([...vowels]);
  shuffled.forEach(v=>{
    const span = document.createElement('span');
    span.innerText = v.letter;
    span.className = 'vowel';
    span.draggable = true;
    span.id = 'vowel-' + Math.floor(Math.random()*10000);
    span.dataset.type = v.type;
    span.ondragstart = drag;
    container.appendChild(span);
  });
}

function startGame(){
  score = 0;
  document.getElementById('score').innerText = score;
  document.getElementById('feedback').innerText = '';
  ['frontZone','backZone','neutralZone'].forEach(id=>{
    const zone = document.getElementById(id);
    zone.dataset.vowels = '';
    zone.innerHTML = '';
    zone.classList.remove('complete');
  });
  createVowels();
}

function clearRound(){
  document.getElementById('feedback').innerText = '';
  ['frontZone','backZone','neutralZone'].forEach(id=>{
    const zone = document.getElementById(id);
    zone.dataset.vowels = '';
    zone.innerHTML = '';
    zone.classList.remove('complete');
  });
  createVowels();
}

startGame();
</script>
</body>
</html>
