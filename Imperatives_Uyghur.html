<!DOCTYPE html>
<html lang="ug" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Uyghur Imperative Game</title>
<style>
  @font-face {
    font-family: 'ALKATIPYazma';
    src: url('https://raw.githubusercontent.com/Uyghur-coder/Uyghur-alphabet-games/main/fonts/ALKATIPYazma.ttf') format('truetype');
  }
  @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap');

  body {
    font-family: Arial, sans-serif;
    background: #ffffff;
    display: flex;
    justify-content: center;
    padding: 20px;
  }

  .game-container {
    max-width: 900px;
    background: #ffffff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    text-align: center;
  }

  .verb-box { 
    font-family: 'ALKATIPYazma', sans-serif;
    font-size: 26px;
    margin: 20px 0; 
    background: #ffffff; 
    padding: 10px; 
    border-radius: 5px;
    border: 2px solid #ccc;
  }

  .verb-latin {
    font-family: 'Roboto', sans-serif;
    font-size: 20px;
    margin-bottom: 5px;
  }

  .category-prompt { 
    font-size: 20px; 
    margin: 15px 0; 
    font-weight: bold; 
  }

  .category-line { display: block; }

  .choices { 
    display: flex; 
    flex-wrap: wrap; 
    gap: 10px; 
    justify-content: center; 
  }

  .choice { 
    padding: 10px 20px; 
    cursor: pointer; 
    border-radius: 5px; 
    font-family: 'ALKATIPYazma', sans-serif;
    font-size: 22px;
    border: 2px solid #64b5f6;
    background-color: #ffffff;
    color: #1565c0;
    transition: transform 0.2s, border 0.2s, background 0.2s;
  }

  .choice:hover { 
    transform: scale(1.05); 
    border-color: #42a5f5; 
    background-color: #e3f2fd; 
  }

  .score-bar { margin-top: 20px; font-weight: bold; color: #d35400; }
  #feedback { margin-top: 15px; font-weight: bold; }

  .correct { border-color: green; background-color: #c8e6c9 !important; color: #1b5e20 !important; }
  .incorrect { border-color: red; background-color: #ffcdd2 !important; color: #b71c1c !important; }

  button { 
    padding: 10px 20px; 
    font-size: 16px; 
    margin-top: 20px; 
    background: #42a5f5; 
    color: white; 
    border: none; 
    border-radius: 5px; 
    cursor: pointer; 
    font-weight: bold;
  }

  button:hover { background: #1e88e5; }

</style>
</head>
<body>

<div class="game-container">
  <h1 style="color:#2c3e50;">Game: Imperatives in Uyghur</h1>
  <div class="score-bar" id="score-bar">Score: 0</div>
  <div class="verb-box" id="verb-box"></div>
  <div class="category-prompt" id="category-prompt"></div>
  <div class="choices" id="choices"></div>
  <div id="feedback"></div>
  <button onclick="nextQuestion()">Next Question</button>
</div>

<script>
const verbs = [
  { uly: "barmaq", arabic: "بارماق", forms: ["بار", "بارغىن", "بېرىڭ", "بېرىڭلار", "بارسۇن"] },
  { uly: "oqumaq", arabic: "ئوقۇماق", forms: ["ئوقۇ", "ئوقۇغىن", "ئوقۇڭ", "ئوقۇڭلار", "ئوقۇسۇن"] },
  { uly: "yazmaq", arabic: "يازماق", forms: ["ياز", "يازغىن", "يېزىڭ", "يېزىڭلار", "يازسۇن"] },
  { uly: "körmek", arabic: "كۆرمەك", forms: ["كۆر", "كۆرگىن", "كۆرۈڭ", "كۆرۈڭلار", "كۆرسۇن"] },
  { uly: "bilmek", arabic: "بىلىمەك", forms: ["بىل", "بىلگىن", "بىلىڭ", "بىلىڭلار", "بىلسۇن"] },
  { uly: "bermek", arabic: "بەرمەك", forms: ["بەر", "بەرگىن", "بېرىڭ", "بېرىڭلار", "بەرسۇن"] },
  { uly: "qilmaq", arabic: "قىلماق", forms: ["قىل", "قىلغىن", "قىلىڭ", "قىلىڭلار", "قىلسۇن"] },
  { uly: "ishlimek", arabic: "ئىشلىمەك", forms: ["ئىشلە", "ئىشلىگىن", "ئىشلەڭ", "ئىشلەڭلار", "ئىشلىسۇن"] },
  { uly: "yémek", arabic: "يېمەك", forms: ["يە", "يېگىن", "يەڭ", "يەڭلار", "يېسۇن"] },
  { uly: "turmaq", arabic: "تۇرماق", forms: ["تۇر", "تۇرغىن", "تۇرۇڭ", "تۇرۇڭلار", "تۇرسۇن"] },
  { uly: "olturmaq", arabic: "ئولتۇرماق", forms: ["ئولتۇر", "ئولتۇرغىن", "ئولتۇرۇڭ", "ئولتۇرۇڭلار", "ئولتۇرسۇن"] },
  { uly: "izdimek", arabic: "ئىزدىمەك", forms: ["ئىزدە", "ئىزدىگىن", "ئىزدەڭ", "ئىزدەڭلار", "ئىزدىسۇن"] },
  { uly: "pishurmaq", arabic: "پىشۇرماق", forms: ["پىشۇر", "پىشۇرغىن", "پىشۇرۇڭ", "پىشۇرۇڭلار", "پىشۇرسۇن"] },
  { uly: "almaq", arabic: "ئالماق", forms: ["ئال", "ئالغىن", "ئېلىڭ", "ئېلىڭلار", "ئالسۇن"] },
  { uly: "kelmek", arabic: "كەلمەك", forms: ["كەل", "كەلگىن", "كېلىڭ", "كېلىڭلار", "كەلسۇن"] },
  { uly: "unutmaq", arabic: "ئۇنۇتماق", forms: ["ئۇنۇت", "ئۇنۇتقىن", "ئۇنتۇڭ", "ئۇنۇتۇڭلار", "ئۇنۇتسۇن"] },
  { uly: "utmaq", arabic: "ئۇتماق", forms: ["ئۇت", "ئۇتقىن", "ئۇتۇڭ", "ئۇتۇڭلار", "ئۇتسۇن"] },
  { uly: "chüshenmek", arabic: "چۈشەنمەك", forms: ["چۈشەن", "چۈشەنگىن", "چۈشىنىڭ", "چۈشىىنڭلار", "چۈشەنسۇن"] },
  { uly: "ketmek", arabic: "كەتمەك", forms: ["كەت", "كەتكىن", "كېتىڭ", "كېتىڭلار", "كەتسۇن"] }
];

const categories = [
  { key: 0, label: "2nd Person Informal Strong" },
  { key: 1, label: "2nd Person Informal Soft" },
  { key: 2, label: "2nd Person Polite" },
  { key: 3, label: "2nd Person Plural" },
  { key: 4, label: "3rd Person (Singular & Plural)" }
];

let score = 0;
let currentVerb, currentCategory;

function randomQuestion() {
  currentVerb = verbs[Math.floor(Math.random() * verbs.length)];
  currentCategory = categories[Math.floor(Math.random() * categories.length)];

  document.getElementById('verb-box').innerHTML = `
    <div class="verb-latin">${currentVerb.uly}</div>
    <div class="uyghur-arabic">${currentVerb.arabic}</div>
  `;

  const parts = currentCategory.label.split(' ');
  document.getElementById('category-prompt').innerHTML = `
    <span class="category-line">${parts.slice(0,2).join(' ')}</span>
    <span class="category-line">${parts.slice(2).join(' ')}</span>
  `;

  // Start with all forms of current verb
  let options = [...currentVerb.forms];

  // Add distractor forms from other verbs until we have at least 5
  while (options.length < 5) { 
    let randomVerb = verbs[Math.floor(Math.random() * verbs.length)];
    let randomForm = randomVerb.forms[Math.floor(Math.random() * randomVerb.forms.length)];
    if (!options.includes(randomForm)) options.push(randomForm);
  }

  // Shuffle options and take exactly 5
  options = options.sort(() => Math.random() - 0.5).slice(0, 5);

  document.getElementById('choices').innerHTML = options.map(opt => `
    <div class="choice" onclick='checkAnswer(this,"${opt}")'>${opt}</div>
  `).join('');
}

function checkAnswer(el, answer) {
  const correct = currentVerb.forms[currentCategory.key];
  const allChoices = document.querySelectorAll('.choice');

  allChoices.forEach(c => {
    if (c.textContent === correct) c.classList.add('correct');
    else if (c !== el) c.classList.remove('correct', 'incorrect');
  });

  if (answer === correct) {
    el.classList.add('selected');
    document.getElementById('feedback').textContent = "✅ Correct!";
    score++;
  } else {
    el.classList.add('incorrect');
    document.getElementById('feedback').textContent = `❌ Incorrect. Correct: ${correct}`;
  }

  document.getElementById('score-bar').textContent = "Score: " + score;
}

function nextQuestion() {
  randomQuestion();
  document.getElementById('feedback').textContent = '';
}

document.addEventListener("DOMContentLoaded", randomQuestion);
</script>

</body>
</html>
